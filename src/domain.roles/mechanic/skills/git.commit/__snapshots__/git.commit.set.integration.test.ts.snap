// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing

exports[`git.commit.set.sh given: [case1] commit without push when: [t0] mechanic has uses and staged changes then: outputs righteous with commit details 1`] = `
"ğŸ¢ righteous!

ğŸš git.commit.set
   â”œâ”€ commit
   â”‚  â”œâ”€ header: fix(api): validate input
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - test change
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â””â”€ patron
   â”‚     â”œâ”€ name: Test Human
   â”‚     â””â”€ email: human@test.com
   â”œâ”€ push: skipped
   â””â”€ meter
      â”œâ”€ left: 2
      â””â”€ push: blocked
"
`;

exports[`git.commit.set.sh given: [case3] no uses left when: [t0] apply mode with 0 uses then: outputs bummer dude 1`] = `
"ğŸ¢ bummer dude...

ğŸš git.commit.set
   â””â”€ error: no commit uses left

ask your human to grant more:
  $ git.commit.uses set --allow N --push allow|block
"
`;

exports[`git.commit.set.sh given: [case3] no uses left when: [t1] plan mode with 0 uses then: plan is allowed without uses 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: fix: zero uses plan
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - test change
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ fix.txt
   â”œâ”€ push: skipped
   â””â”€ meter
      â”œâ”€ left: 0 â†’ -1
      â””â”€ push: blocked

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case4] push not allowed when: [t0] push is blocked but --push requested then: outputs bummer dude about push 1`] = `
"ğŸ¢ bummer dude...

ğŸš git.commit.set
   â””â”€ error: push not allowed in current grant

ask your human to grant with --push allow

"
`;

exports[`git.commit.set.sh given: [case6] no git user configured when: [t0] git user.name is not set then: exits with error about patron 1`] = `
"ğŸ¢ bummer dude...

ğŸš git.commit.set
   â””â”€ error: cannot determine patron

human must configure git identity:
  $ git config user.name "Your Name"\\n  $ git config user.email "your@email.com"
"
`;

exports[`git.commit.set.sh given: [case10] plan mode shows preview when: [t0] plan mode is default then: shows plan output without committing 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: fix: plan test
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - test change
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ fix.txt
   â”œâ”€ push: skipped
   â””â”€ meter
      â”œâ”€ left: 3 â†’ 2
      â””â”€ push: blocked

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case10] plan mode shows preview when: [t1] plan mode with push shows PR title then: shows PR title as current message when first commit 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: feat: new feature
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - add feature
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ feature.txt
   â”œâ”€ push: origin/turtle/feature
   â”œâ”€ pr
   â”‚  â”œâ”€ title: feat: new feature
   â”‚  â””â”€ action: findsert draft
   â””â”€ meter
      â”œâ”€ left: 2 â†’ 1
      â””â”€ push: allowed

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case10] plan mode shows preview when: [t1] plan mode with push shows PR title then: shows first commit as PR title when branch has history 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: feat: third commit
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - add third feature
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ third.txt
   â”œâ”€ push: origin/turtle/multi-commit
   â”œâ”€ pr
   â”‚  â”œâ”€ title: feat: first commit on branch
   â”‚  â””â”€ action: findsert draft
   â””â”€ meter
      â”œâ”€ left: 5 â†’ 4
      â””â”€ push: allowed

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case11] push to main/master blocked when: [t0] on main branch with --push requested then: exits with error about main branch 1`] = `
"ğŸ¢ bummer dude...

ğŸš git.commit.push
   â””â”€ error: cannot push directly to main

create a feature branch first:
  $ git checkout -b turtle/your-branch-name
"
`;

exports[`git.commit.set.sh given: [case12] PR title on stacked branch (branch from branch) when: [t0] branch B created from branch A, both with commits then: PR title uses first commit unique to branch B 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: feat: B3 third on branch-b
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - add B3 feature
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ b3.txt
   â”œâ”€ push: origin/turtle/branch-b
   â”œâ”€ pr
   â”‚  â”œâ”€ title: feat: B1 first on branch-b
   â”‚  â””â”€ action: findsert draft
   â””â”€ meter
      â”œâ”€ left: 5 â†’ 4
      â””â”€ push: allowed

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case13] last use with push allowed shows push status when: [t0] uses go from 1 to 0 with push allowed then: meter shows push: allowed after commit 1`] = `
"ğŸ¢ righteous!

ğŸš git.commit.set
   â”œâ”€ commit
   â”‚  â”œâ”€ header: fix(api): last commit
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - test change
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â””â”€ patron
   â”‚     â”œâ”€ name: Test Human
   â”‚     â””â”€ email: human@test.com
   â”œâ”€ push: skipped
   â””â”€ meter
      â”œâ”€ left: 0
      â””â”€ push: allowed
"
`;

exports[`git.commit.set.sh given: [case13] last use with push allowed shows push status when: [t0] uses go from 1 to 0 with push allowed then: plan mode also shows push: allowed 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: fix(api): last commit plan
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - test change
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ fix.txt
   â”œâ”€ push: skipped
   â””â”€ meter
      â”œâ”€ left: 1 â†’ 0
      â””â”€ push: allowed

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case14] bound level enforced â€” fix rejects feat prefix when: [t0] level bound to fix, header starts with feat( then: exits with level mismatch error 1`] = `
"ğŸ¢ bummer dude...

ğŸš git.commit.set
   â””â”€ error: commit header must start with 'fix' â€” level bound by human

   header: feat(api): add endpoint
   bound level: fix

fix: use a 'fix(scope): ...' or 'fix: ...' prefix
"
`;

exports[`git.commit.set.sh given: [case14] multiline message is required when: [t1] message is multiline (has body) then: body appears in plan tree output 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: fix: with desc
   â”‚  â”œâ”€ body
   â”‚  â”‚  â”œâ”€ - fixed the bug
   â”‚  â”‚  â””â”€ - added tests
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ fix.txt
   â”œâ”€ push: skipped
   â””â”€ meter
      â”œâ”€ left: 2 â†’ 1
      â””â”€ push: blocked

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case15] plan mode auto-revoke display with push when: [t0] uses go from 1 to 0 with push allowed then: plan shows push: allowed to blocked (revoked) 1`] = `
"ğŸ¢ heres the wave...

ğŸš git.commit.set --mode plan
   â”œâ”€ commit
   â”‚  â”œâ”€ header: fix: last use
   â”‚  â”œâ”€ body
   â”‚  â”‚  â””â”€ - last commit before revoke
   â”‚  â”œâ”€ author
   â”‚  â”‚  â”œâ”€ name: seaturtle[bot]
   â”‚  â”‚  â””â”€ email: seaturtle@ehmpath.com
   â”‚  â”œâ”€ patron
   â”‚  â”‚  â”œâ”€ name: Test Human
   â”‚  â”‚  â””â”€ email: human@test.com
   â”‚  â””â”€ files
   â”‚     â””â”€ fix.txt
   â”œâ”€ push: origin/turtle/revoke-test
   â”œâ”€ pr
   â”‚  â”œâ”€ title: fix: last use
   â”‚  â””â”€ action: findsert draft
   â””â”€ meter
      â”œâ”€ left: 1 â†’ 0
      â””â”€ push: allowed â†’ blocked (revoked)

run with --mode apply to execute
"
`;

exports[`git.commit.set.sh given: [case16] bound level enforced â€” feat rejects fix prefix when: [t0] level bound to feat, header starts with fix( then: exits with level mismatch error 1`] = `
"ğŸ¢ bummer dude...

ğŸš git.commit.set
   â””â”€ error: commit header must start with 'feat' â€” level bound by human

   header: fix(ui): button color
   bound level: feat

fix: use a 'feat(scope): ...' or 'feat: ...' prefix
"
`;
