# execution: git worktree management skills

## progress tracker

### phase 0: shared foundation
- [x] **0.1** create `git.worktree.common.sh`
  - implemented `resolve_worktrees_dir()`, `sanitize_branch_name()`, `get_repo_name()`
  - handles root repo and worktree contexts
  - **verified**: sourced without error, functions output correct paths

- [x] **0.2** create `git.worktree.sh` dispatcher
  - routes get|set|del to subcommand scripts
  - shows usage on invalid/missing subcommand
  - **verified**: `git.worktree.sh` exits 1 with usage text

### phase 1: get (read-only)
- [x] **1.1** create `git.worktree.get.sh`
  - lists worktrees or shows "(no worktrees)"
  - **verified**: outputs correct list or empty message

### phase 2: set (create/findsert)
- [x] **2.1** create `git.worktree.set.sh` basic functionality
  - findserts: `[KEEP]` if exists, `[CREATE]` if not
  - **verified**: creates at correct path, idempotent on rerun

- [x] **2.2** add `--main` flag
  - creates branch from origin/main
  - **verified**: (manual) `--main` creates branch diverging from origin/main

- [x] **2.3** add `--open` flag
  - invokes `codium $WORKTREE_PATH`
  - **verified**: (manual) opens editor with worktree

### phase 3: del (destructive)
- [x] **3.1** create `git.worktree.del.sh`
  - `[DELETE]` if exists, `[SKIP]` if not found
  - **verified**: removes worktree, skips gracefully

### phase 4: cross-worktree support
- [x] **4.1** verify path resolution from worktree context
  - same worktrees listed from root repo and from worktree
  - **verified**: `get` outputs identical from both contexts

- [x] **4.2** verify set/del from worktree context
  - creates in same `_worktrees/$repo` dir
  - **verified**: new worktree appears in shared location

### phase 5: test coverage
- [x] **5.1** create `git.worktree.test.sh`
  - 19 test cases passing
  - covers: dispatcher, get, set, del, idempotency, cross-worktree
  - **verified**: `./git.worktree.test.sh` exits 0

### phase 6: polish
- [x] **6.1** make all scripts executable
  - `chmod +x git.worktree*.sh`
  - **verified**: all scripts executable

- [x] **6.2** update execution summary
  - this file

---

## files created

| file | purpose |
|------|---------|
| `git.worktree.sh` | dispatcher (get\|set\|del) |
| `git.worktree.common.sh` | shared path resolution helpers |
| `git.worktree.get.sh` | list worktrees |
| `git.worktree.set.sh` | findsert worktree |
| `git.worktree.del.sh` | remove worktree |
| `git.worktree.test.sh` | test suite (19 tests) |

---

## usage

```bash
# list worktrees
git.worktree.sh get

# create/findsert worktree
git.worktree.sh set vlad/feature-x
git.worktree.sh set vlad/feature-x --open    # + open in codium
git.worktree.sh set vlad/feature-x --main    # from origin/main

# remove worktree
git.worktree.sh del vlad/feature-x
```

## worktree location

```
# from root repo @gitroot:
@gitroot/../_worktrees/$reponame/$branchname

# from within worktree:
(reuses same _worktrees/$reponame/)
```

Branch name sanitization: `vlad/feature-x` => `vlad.feature-x`
