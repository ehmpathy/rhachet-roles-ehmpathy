# execution: brief.compress with bhrain/sitrep

## phase 0: extract shared module + rename llmlingua engine
- [x] create `compress.shared.ts`
- [x] rename `compress.ts` → `compress.via.llmlingua.ts`
- [x] update imports in `compress.via.llmlingua.ts`
- [x] update parseArgs in `compress.via.llmlingua.ts`
- [x] update `brief.compress.sh` engine path
- [x] npm run build
- [x] verify: llmlingua via renamed engine produces same output

## phase 1: update shell orchestrator
- [x] add `--via` parse logic
- [x] add `--from` flag
- [x] add `--into` flag + glob guard
- [x] route by press family
- [x] update engine invocation args
- [x] update stats display
- [x] verify: llmlingua via `--via` works
- [x] verify: error paths failfast

## phase 2: create bhrain engine
- [x] create `compress.via.bhrain.ts`
- [x] define sitrep template
- [x] implement `compressViaBhrain`
- [x] implement parseArgs + main
- [x] catch `BrainChoiceNotFoundError`
- [x] npm run build
- [x] fix: shell passes press-specific args (no --rate for bhrain)
- [x] verify: direct engine invocation works (885→244 tokens, 3.63x)

## phase 3: end-to-end integration
- [ ] verify bhrain plan mode
- [ ] verify bhrain apply mode
- [ ] verify `--into`
- [ ] verify glob batch
- [ ] verify default brain
- [ ] verify error paths

## phase 4: integration tests
- [ ] create `compress.via.bhrain.integration.test.ts`
- [ ] create `compress.via.llmlingua.integration.test.ts`
- [ ] create `brief.compress.integration.test.ts`
- [ ] all tests pass

## phase 5: cleanup + final verification
- [ ] delete old `compress.ts` and build artifacts
- [ ] npm run build clean
- [ ] npm run test:types
- [ ] npm run test:lint
- [ ] review filediffs against blueprint
- [ ] update skill header comment
