# blackbox criteria matrix: condense skill

## matrix.1: execution mode × brief validity

| ind: mode | ind: brief validity | dep: .min file | dep: exit code | dep: output |
|-----------|---------------------|----------------|----------------|-------------|
| plan | valid | not created | 0 | preview shown |
| plan | empty | not created | 1 | "empty content" |
| plan | no kernels | not created | 1 | "no kernels extracted" |
| plan | unstable | not created | 2 | stability metrics + suggestion |
| apply | valid | created | 0 | metrics shown |
| apply | empty | not created | 1 | "empty content" |
| apply | no kernels | not created | 1 | "no kernels extracted" |
| apply | unstable | not created | 2 | stability metrics + suggestion |

**coverage**: complete — all 8 combinations specified

---

## matrix.2: supply × verify × kernel loss

| ind: onSupply | ind: onVerify | ind: kernel loss | dep: kern.Δ shown | dep: recovery | dep: exit code |
|---------------|---------------|------------------|-------------------|---------------|----------------|
| kernelize | null | none | yes | n/a | 0 |
| kernelize | null | some | yes | warn + proceed | 0 |
| kernelize | restore | none | yes | n/a | 0 |
| kernelize | restore | some | yes | kernels appended | 0 |
| null | null | n/a | no | n/a | 0 |
| null | restore | n/a | no | n/a | 0 |

**coverage**: complete — all 6 meaningful combinations specified

**note**: `onSupply=null` with `onVerify=restore` is valid but has no effect (no kernels to restore from)

---

## matrix.3: file resolution

| ind: input type | ind: file state | dep: exit code | dep: error message |
|-----------------|-----------------|----------------|--------------------|
| path | found | 0 | (none) |
| path | not found | 1 | "file not found: {path}" |
| glob | ≥1 match | 0 | (none) |
| glob | 0 matches | 1 | "no files matched" |

**coverage**: complete — all 4 combinations specified

---

## matrix.4: variance measurement

| ind: attempts | ind: brief stability | dep: σ metrics | dep: exit code |
|---------------|----------------------|----------------|----------------|
| 1 | stable | not shown | 0 |
| 1 | unstable | not shown | 2 |
| 3 (default) | stable | shown | 0 |
| 3 (default) | unstable | shown | 2 |
| N (custom) | stable | shown | 0 |
| N (custom) | unstable | shown | 2 |

**coverage**: complete — all 6 combinations specified

**note**: with `attempts=1`, stability cannot be measured (only 1 sample), but if `onSupply=kernelize` uses consensus internally, instability is still detectable

---

## matrix.5: output path resolution

| ind: --into specified | ind: target state | dep: behavior |
|-----------------------|-------------------|---------------|
| no | n/a | emit to {from}.min |
| yes | not extant | create at --into path |
| yes | extant | overwrite (idempotent) |

**coverage**: complete — all 3 combinations specified

---

## matrix.6: pipeline spec validation

| ind: --onPress format | ind: brief names | dep: exit code | dep: error |
|-----------------------|------------------|----------------|------------|
| valid json array | all known | 0 | (none) |
| valid json array | unknown name | 1 | "unknown brief: {name}" |
| malformed json | n/a | 1 | syntax error highlighted |
| omitted | n/a | 0 | default pipeline used |

**coverage**: complete — all 4 combinations specified

---

## matrix.7: brain provider errors

| ind: provider state | dep: exit code | dep: output |
|---------------------|----------------|-------------|
| healthy | 0 | metrics shown |
| rate limited | 1 | error with provider details |
| timeout | 1 | error with provider details |
| other error | 1 | error with provider details |

**coverage**: complete — all 4 states specified

---

## gap analysis

**no gaps found** — all matrices have complete coverage for their dimension combinations.

---

## decomposition assessment

**dimension count per matrix:**
- matrix.1: 2 dimensions ✓
- matrix.2: 3 dimensions ✓
- matrix.3: 2 dimensions ✓
- matrix.4: 2 dimensions ✓
- matrix.5: 2 dimensions ✓
- matrix.6: 2 dimensions ✓
- matrix.7: 1 dimension ✓

**no decomposition needed** — all matrices have ≤3 independent dimensions, well within the manageable range.

**behavioral boundaries are well-scoped:**
- execution flow is separate from file resolution
- supply/verify operations are separate from variance measurement
- pipeline validation is separate from provider errors

the skill decomposes naturally into these orthogonal concerns.
