# plan: telegraphic default + degerund verification

## summary

switch default pipeline from EXTREME density (6-18x) to GOOD density (2-3x) via telegraphic compression, add gerund removal verification step, and retain turtle vibes throughout.

---

## changes

### 1. remove unnecessary quotes in pipeline specs

**why**: each slug is one connected string — quotes add visual noise without value

**before**:
```
[["req-kernels", "sitrep-aggressive"], ["telegraphic"]]
```

**after**:
```
[[req-kernels, sitrep-aggressive], [telegraphic]]
```

**files**:
- `brief.condense.sh` — update --help examples
- `brief.condense.ts` — update default pipeline constant
- `brief.condense.integration.test.ts` — update test assertions
- `briefs/recommended-pipelines.md` — update all examples

---

### 2. change default to GOOD density (2-3x compression)

**why**: EXTREME density (6-18x) is too terse for practical use. GOOD density (2-3x) preserves readability while still able to compress well.

**default pipeline change**:
- **prior**: `[[req-kernels, sitrep-aggressive], [telegraphic]]` (6-18x)
- **new**: `[[req-kernels, telegraphic]]` (2.8x, kern.σ = 0.28)

**perfeval results** (validated 2026-02-17):
| pipeline | compress | kern.σ | verdict |
|----------|----------|--------|---------|
| `[[telegraphic]]` | 3.3x | 0.33 | good, slightly above target |
| `[[req-kernels, telegraphic]]` | **2.8x** | **0.28** | **sweet spot** ← default |
| `[[telegraphic]], ver:[restore]` | 2.3x | 0.20 | most lossless |

**files**:
- `brief.condense.ts` — update `DEFAULT_PIPELINE` constant
- `brief.condense.sh` — update --help default description
- `briefs/recommended-pipelines.md` — reorder to put GOOD density first

---

### 3. add ver[degerund] step by default

**why**: gerunds violate our style guide (rule.forbid.gerunds). automatic removal ensures compressed briefs comply.

**mechanism**:
1. regex scan for words ending in `-ing`
2. if found, prompt brain to rewrite without gerunds
3. accept output (no validation needed — brain handles naturally)

**pattern** (same as forbid-gerunds hook):
```ts
const gerundPattern = /\b\w+ing\b/gi;
const hasGerunds = gerundPattern.test(content);
if (hasGerunds) {
  // recompress with degerund instruction
}
```

**files**:
- `domain.operations/verify/degerund.ts` — new verification operation
- `brief.condense.ts` — add degerund to default verify pipeline
- `briefs/degerund.methodology.md` — document the approach

---

### 4. always include turtle vibes tone briefs

**why**: compressed briefs must preserve the chill, lowercase, no-caps style

**approach**:
- compress command always includes tone preservation — not optional, not configurable
- tone instruction baked into base compression prompt

**instruction to always include**:
```
preserve tone: lowercase, chill, no-caps style. avoid shouts or formal capitalization.
```

**files**:
- `compress.via.bhrain.ts` — add tone preservation to base system prompt (always on)

---

### 5. update recommended-pipelines.md

**new structure**:

| density | pipeline | compression | kern.σ | use case |
|---------|----------|-------------|--------|----------|
| GOOD (default) | `[[req-kernels, telegraphic]]` | 2.8x | 0.28 | general use |
| GOOD + restore | `[[telegraphic]], ver:[restore]` | 2.3x | 0.20 | lossless recovery |
| GOOD (simple) | `[[telegraphic]]` | 3.3x | 0.33 | quick compress |
| EXTREME | `[[sitrep-aggressive], [telegraphic]]` | 6-18x | <1 | max compression |
| EXTREME + lossless | `[[req-kernels, sitrep-aggressive], [telegraphic]]` | 6-18x | 0 | max + kernel-critical |

---

### 6. update help output

**brief.condense.sh --help** should show:

```
pipelines (--onPress):
  GOOD density (2-3x compression):
    [[req-kernels, telegraphic]]              # default (2.8x, kern.σ=0.28)
    [[telegraphic]], ver:[restore]            # with kernel recovery (2.3x)
    [[telegraphic]]                           # simple (3.3x)

  EXTREME density (6-18x compression):
    [[sitrep-aggressive], [telegraphic]]      # max compression
    [[req-kernels, sitrep-aggressive], [telegraphic]]  # max + lossless
```

---

## perfevals to run

before implementation, validate compression ratios:

| pipeline | target | metric focus |
|----------|--------|--------------|
| `[[telegraphic]]` | 2-3x compression | kern.σ |
| `[[req-kernels, telegraphic]]` | 2-3x compression, kern.Δ=0 | kern.σ |
| `[[telegraphic]], ver:[restore]` | 2-3x compression, kern.Δ=0 | kern.σ |

---

## implementation order

1. **run perfevals** — validate telegraphic pipelines achieve 2-3x compression
2. **add degerund.ts** — verification operation
3. **update compress prompts** — add tone preservation
4. **update brief.condense.ts** — new default pipeline + degerund verify
5. **update brief.condense.sh** — new help examples (no quotes)
6. **update recommended-pipelines.md** — GOOD vs EXTREME structure
7. **update tests** — align with new defaults

---

## success criteria

- [x] `[[req-kernels, telegraphic]]` achieves 2.8x compression with kern.σ = 0.28 ✓ (validated)
- [ ] degerund verification removes -ing words
- [ ] tone briefs always included in compress prompts (not optional)
- [ ] help shows GOOD density as default with `[[req-kernels, telegraphic]]`
- [ ] all tests pass
