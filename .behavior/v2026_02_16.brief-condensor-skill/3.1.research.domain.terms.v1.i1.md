# research domain terms: condense skill

## domain objects required

based on the vision and criteria, the condense skill requires domain objects for:

1. **the atomic units of meaning** — what survives compression
2. **the compression process** — what transforms the brief
3. **the quality measure** — what tells us if compression succeeded
4. **the pipeline stages** — what orchestrates the process
5. **the stability measure** — what tells us if output is reliable

---

## parallel domain analysis

### chemistry: distillation

> "distillation is a purification method for liquids that can separate components of a mixture" [1]

> "the liquid that is obtained by performing the condensation of vapor is called the distillate" [1]

> "Latin term 'distillo,' from de-stillo and stilla (meaning a drop), referred to the dropping of a liquid" [2]

| chemistry term | meaning | parallel in text |
|----------------|---------|------------------|
| **distillate** | purified liquid output | compressed brief |
| **essence** | concentrated extract | kernels |
| **fraction** | separated component | extracted concept |
| **residue** | what remains after | lost content |

**sources**:
- [1] [Chemistry LibreTexts - Distillation](https://chem.libretexts.org/Bookshelves/Organic_Chemistry/Organic_Chemistry_Lab_Techniques_(Nichols)/05:_Distillation)
- [2] [Oxford English Dictionary - distillation](https://www.oed.com/dictionary/distillation_n)

---

### culinary: reduction

> "reduction is the process of thickening and intensifying the flavor of a liquid mixture... by simmering or boiling" [3]

> "the principle is simple: the water will evaporate, concentrating the fats and proteins" [4]

> "the liquid is reduced, or cooked down, by ¾ volume or au sec, a French term for almost completely dry" [5]

| culinary term | meaning | parallel in text |
|---------------|---------|------------------|
| **reduction** | concentrated liquid | compressed brief |
| **au sec** | reduced to minimum | maximum compression |
| **concentrate** | intensified flavor | dense kernels |
| **simmer** | slow controlled heat | iterative pass |

**sources**:
- [3] [Wikipedia - Reduction (cooking)](https://en.wikipedia.org/wiki/Reduction_(cooking))
- [4] [Fine Dining Lovers - Science of Sauce Reduction](https://www.finedininglovers.com/explore/articles/science-sauce-reduction)
- [5] [Workforce LibreTexts - Sauce Terminology](https://workforce.libretexts.org/Bookshelves/Food_Production_Service_and_Culinary_Arts/Flavors_of_the_Saucier:_Stocks_Sauces_and_Soups_(Zeringue_and_Thibodeaux)/02:_Appendices/2.04:_New_Page)

---

### perfumery: extraction

> "fragrance extraction refers to the separation process of aromatic compounds from raw materials" [6]

> "the solvent is then evaporated, leaving behind a waxy substance called 'concrete'. This concrete is then treated with alcohol... producing a perfume 'absolute'" [6]

| perfumery term | meaning | parallel in text |
|----------------|---------|------------------|
| **absolute** | purest extract | kernel set |
| **concrete** | intermediate form | mid-pipeline state |
| **expression** | mechanical extract | extractive method |
| **enfleurage** | slow absorption | iterative method |

**sources**:
- [6] [Wikipedia - Fragrance extraction](https://en.wikipedia.org/wiki/Fragrance_extraction)

---

### winemaking: press

> "pressing is the process where juice is extracted from the grapes with the aid of a wine-press" [7]

> "free-run juice contains significantly less tannin and lower acid levels than pressed juice" [7]

> "the rosy mixture of all the solid remains of the grapes after pressing is known as 'grape pomace'" [8]

| winemaking term | meaning | parallel in text |
|-----------------|---------|------------------|
| **press** | extract under pressure | compress |
| **free-run** | first extract (best) | first pass |
| **pomace** | solid remains | discarded content |
| **must** | pre-press mixture | source brief |

**sources**:
- [7] [Wikipedia - Pressing (wine)](https://en.wikipedia.org/wiki/Pressing_(wine))
- [8] [Westgarth Wines - Grape Processing](https://westgarthwines.com/blogs/news/grape-processing-destemming-crushing-and-pressing-in-white-wines)

---

### mining: refine

> "the term 'refining' refers to any process that increases the grade or purity of a metal" [9]

> "concentration refers to the methods of producing ore fractions richer in iron and lower in silica than the original material. The upgraded ore, or concentrate" [10]

| mining term | meaning | parallel in text |
|-------------|---------|------------------|
| **concentrate** | upgraded ore | compressed brief |
| **refine** | increase purity | remove noise |
| **smelt** | extract from ore | extract kernels |
| **grade** | purity measure | density |

**sources**:
- [9] [Wikipedia - Refining (metallurgy)](https://en.wikipedia.org/wiki/Refining_(metallurgy))
- [10] [Britannica - Iron processing](https://www.britannica.com/technology/iron-processing/Ores)

---

### NLP: compression

> "prompt compression is the process of shortening and optimizing the input text given to a Large Language Model while ensuring that the essential meaning and context remain intact" [11]

> "extractive summarization algorithms automatically generate summaries by selecting and combining key passages from the original text" [12]

> "abstractive summarization generates entirely new sentences to convey key ideas from the original text" [12]

> "LLMLingua achieved up to 20x compression while preserving the original prompt's capabilities" [13]

| NLP term | meaning | parallel |
|----------|---------|----------|
| **extractive** | select & combine | preserve exact text |
| **abstractive** | generate new | rewrite concepts |
| **compression ratio** | size reduction | token ratio |
| **perplexity** | surprisal measure | information density |

**sources**:
- [11] [Medium - Prompt Compression in LLMs](https://medium.com/@sahin.samia/prompt-compression-in-large-language-models-llms-making-every-token-count-078a2d1c7e03)
- [12] [GeeksforGeeks - Text Summarization in NLP](https://www.geeksforgeeks.org/nlp/text-summarization-in-nlp/)
- [13] [Microsoft Research - LLMLingua](https://www.microsoft.com/en-us/research/blog/llmlingua-innovating-llm-efficiency-with-prompt-compression/)

---

## domain object proposals

### 1. atomic units of meaning

**what**: the critical concepts that must survive compression

**options**:

| term | source domain | pros | cons |
|------|---------------|------|------|
| **kernel** | computing | precise, technical, familiar to devs | slightly abstract |
| **essence** | chemistry/perfume | intuitive, implies "what matters" | too poetic? |
| **absolute** | perfumery | implies purest form | unfamiliar |
| **concentrate** | culinary/mining | implies density | noun/verb confusion |
| **seed** | agriculture | implies origin/core | too small |

**recommendation**: `kernel`
- established in ML for "kernel methods"
- clear metaphor: the seed inside the husk
- already used in codebase (`extractKernels`)

---

### 2. the compression process

**what**: the transformation from verbose to dense

**options**:

| term | source domain | pros | cons |
|------|---------------|------|------|
| **condense** | physics | precise, implies density increase | slightly clinical |
| **reduce** | culinary | intuitive, common verb | overloaded in programming |
| **distill** | chemistry | implies purification | implies liquid |
| **press** | winemaking | implies extraction under pressure | too physical |
| **refine** | mining | implies quality increase | too generic |

**recommendation**: `condense`
- physics metaphor: gas → liquid (compression)
- implies increased density, not just smaller size
- distinguishes from simple "compress" (lossless)

---

### 3. quality measure

**what**: the metric that tells us if compression preserved meaning

**options**:

| term | source domain | pros | cons |
|------|---------------|------|------|
| **density** | physics | precise, measurable | requires unit definition |
| **grade** | mining | implies quality level | unfamiliar for text |
| **purity** | chemistry | implies no contamination | not about contamination |
| **concentration** | chemistry | implies ratio | noun/verb confusion |
| **intensity** | culinary | implies flavor strength | too subjective |

**recommendation**: `density` with unit `chars/kernel`
- `dens.Δ` = density change (higher = more compressed per kernel)
- physics: mass/volume → text: chars/kernel
- measurable, comparable

---

### 4. pipeline stages

**what**: the orchestration of supply → press → verify

**options for stages**:

| stage | culinary parallel | winemaking parallel | chemistry parallel |
|-------|-------------------|---------------------|-------------------|
| **supply** | mise en place | crush/destem | load apparatus |
| **press** | reduce/simmer | press | heat/vaporize |
| **verify** | taste test | sample | analyze distillate |

**recommendation**: keep `supply`, `press`, `verify`
- `supply` = prepare inputs (kernelize)
- `press` = apply compression steps
- `verify` = check retention

alternative considered: `prep`, `cook`, `plate` (culinary)
- rejected: too casual, less precise

---

### 5. stability measure

**what**: the metric that tells us if output is reliable across runs

**options**:

| term | source domain | pros | cons |
|------|---------------|------|------|
| **stability** | chemistry | precise, implies consistency | generic |
| **consensus** | statistics | implies agreement across samples | unfamiliar |
| **repeatability** | science | precise meaning | too long |
| **variance** | statistics | mathematical precision | requires σ symbol |

**recommendation**: use both
- `stability` for the concept (stable vs unstable brief)
- `σ` (variance) for the metric
- `consensus` for the kernel cluster agreement

---

## domain object relationships

```
Brief (source)
  │
  ├── onSupply: kernelize
  │   └── produces: ConceptKernel[]
  │       ├── id: string
  │       ├── concept: string
  │       ├── category: rule | pattern | definition | ...
  │       └── importance: critical | high | medium | low
  │
  ├── onPress: compress pipeline
  │   └── produces: CompressedBrief
  │       ├── content: string
  │       ├── tokens: { before, after }
  │       └── mechanism: MechanismOrModifier[][]
  │
  └── onVerify: check retention
      └── produces: RetentionReport
          ├── retained: ConceptKernel[]
          ├── lost: ConceptKernel[]
          └── retentionRate: number

CondenseResult
  ├── compressed: string
  ├── kernels: { before, after, delta }
  ├── density: { before, after, delta }
  ├── tokens: { before, after, ratio }
  ├── stability: { meanJaccard, σ }
  └── pipeline: { supply, press, verify }
```

---

## treestruct of common subdomains

```
condense/
├── domain.objects/
│   ├── ConceptKernel.ts          ← [REUSE] from kernelize
│   ├── ConsensusStability.ts     ← [REUSE] from kernelize
│   ├── CompressedBrief.ts        ← [NEW] output of press
│   ├── RetentionReport.ts        ← [NEW] output of verify
│   └── CondenseResult.ts         ← [NEW] final output
│
├── domain.operations/
│   ├── supply/
│   │   └── kernelize.ts          ← [REUSE] extract kernels
│   ├── press/
│   │   └── compressViaBhrain.ts  ← [REUSE] apply compression
│   └── verify/
│       ├── checkRetention.ts     ← [REUSE] compare kernels
│       └── restoreKernels.ts     ← [NEW] append lost kernels
│
└── skill/
    └── brief.condense.ts               ← [NEW] orchestrates pipeline
```

---

## proposed ubiquitous language

| user term | internal term | definition |
|-----------|---------------|------------|
| compress with quality check | condense | atomic operation: kernelize → compress → verify |
| critical concepts | kernels | atomic semantic units that must survive |
| compression quality | density (dens.Δ) | chars per kernel, higher = better |
| concept retention | kernel delta (kern.Δ) | kernel count change, 0 = lossless |
| output consistency | stability (σ) | variance across attempts |
| pipeline stage 1 | supply (onSupply) | prepare inputs |
| pipeline stage 2 | press (onPress) | apply compression |
| pipeline stage 3 | verify (onVerify) | check retention |
| restore lost concepts | restore | append lost kernels to output |

---

## summary

| domain object | recommended term | source domain | rationale |
|---------------|------------------|---------------|-----------|
| atomic meaning unit | `kernel` | computing/agriculture | precise, familiar, already in codebase |
| transformation | `condense` | physics | implies density increase |
| quality metric | `density` | physics | measurable, comparable |
| consistency metric | `stability` / `σ` | chemistry/statistics | precise, mathematical |
| pipeline stage 1 | `supply` | manufacturing | prepare inputs |
| pipeline stage 2 | `press` | winemaking | apply pressure to extract |
| pipeline stage 3 | `verify` | quality control | check output |
| restore operation | `restore` | computing | recover lost data |

the terminology draws primarily from:
- **physics**: condense, density
- **winemaking**: press, free-run
- **chemistry**: distill, essence
- **manufacturing**: supply, verify

this creates a consistent metaphor: briefs are like grapes, kernels are the juice, and the condense skill is the wine press that extracts and concentrates the essence while measuring what was retained.
